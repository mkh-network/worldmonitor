/* ============================================================
   Happy Variant Theme — Calm & Serene
   Sage green + warm gold on cream. No dark military aesthetic.
   Unlayered CSS — wins over main.css which is wrapped in
   @layer base by base-layer.css (@import ... layer(base)).
   ============================================================ */

/* ---------- Happy Light Mode (default + explicit light) ---------- */
:root[data-variant="happy"],
:root[data-variant="happy"][data-theme="light"] {
  /* Backgrounds */
  --bg: #FAFAF5;
  --bg-secondary: #F5F3EE;
  --surface: #FFFFFF;
  --surface-hover: #F5F2EC;
  --surface-active: #EDE9E0;

  /* Borders */
  --border: #DDD9CF;
  --border-strong: #C8C2B5;
  --border-subtle: #EBE8E0;

  /* Text */
  --text: #2D3A2E;
  --text-secondary: #4A5A4C;
  --text-dim: #6B7A6D;
  --text-muted: #8A9A8C;
  --text-faint: #A8B4AA;
  --text-ghost: #C0C8C2;
  --accent: #3D4A3E;

  /* Overlays & shadows */
  --overlay-subtle: rgba(107, 143, 94, 0.03);
  --overlay-light: rgba(107, 143, 94, 0.05);
  --overlay-medium: rgba(107, 143, 94, 0.08);
  --overlay-heavy: rgba(107, 143, 94, 0.12);
  --shadow-color: rgba(80, 70, 50, 0.08);
  --darken-light: rgba(80, 70, 50, 0.06);
  --darken-medium: rgba(80, 70, 50, 0.10);
  --darken-heavy: rgba(80, 70, 50, 0.15);

  /* Scrollbar */
  --scrollbar-thumb: #C8C2B5;
  --scrollbar-thumb-hover: #A8A298;

  /* Input */
  --input-bg: #F2EFE8;

  /* Panels */
  --panel-bg: #FFFFFF;
  --panel-border: #DDD9CF;

  /* Map */
  --map-bg: #D4E6EC;
  --map-grid: #C0D8D8;
  --map-country: #B9CDA8;
  --map-stroke: #C8C0B5;

  /* Typography — Nunito rounded sans-serif */
  --font-body: 'Nunito', system-ui, -apple-system, sans-serif;

  /* Panel border radius — soft rounded corners */
  --panel-radius: 14px;

  /* Severity levels — remapped to positive semantics */
  --semantic-critical: #C4A35A;
  --semantic-high: #6B8F5E;
  --semantic-elevated: #7BA5C4;
  --semantic-normal: #6B8F5E;
  --semantic-low: #C48B9F;
  --semantic-info: #7BA5C4;

  /* Threat levels — remapped to positive tones */
  --threat-critical: #C4A35A;
  --threat-high: #8BAF7A;
  --threat-medium: #7BA5C4;
  --threat-low: #6B8F5E;
  --threat-info: #7BA5C4;

  /* DEFCON levels — warm gradient instead of warning */
  --defcon-1: #C4A35A;
  --defcon-2: #A8B86B;
  --defcon-3: #7BA5C4;
  --defcon-4: #6B8F5E;
  --defcon-5: #8BAF7A;

  /* Status indicators */
  --status-live: #6B8F5E;
  --status-cached: #C4A35A;
  --status-unavailable: #C48B9F;

  /* Legacy color aliases */
  --red: #C48B9F;
  --green: #6B8F5E;
  --yellow: #C4A35A;
}

/* ---------- Happy Dark Mode ---------- */
:root[data-variant="happy"][data-theme="dark"] {
  /* Backgrounds — deep navy, warm darks */
  --bg: #1A2332;
  --bg-secondary: #1E2838;
  --surface: #222E3E;
  --surface-hover: #2A3848;
  --surface-active: #2E3E50;

  /* Borders */
  --border: #344050;
  --border-strong: #445868;
  --border-subtle: #283545;

  /* Text — warm off-whites */
  --text: #E8E4DC;
  --text-secondary: #D0CCC4;
  --text-dim: #A0A098;
  --text-muted: #808880;
  --text-faint: #606860;
  --text-ghost: #485048;
  --accent: #E8E4DC;

  /* Overlays & shadows */
  --overlay-subtle: rgba(139, 175, 122, 0.03);
  --overlay-light: rgba(139, 175, 122, 0.06);
  --overlay-medium: rgba(139, 175, 122, 0.10);
  --overlay-heavy: rgba(139, 175, 122, 0.18);
  --shadow-color: rgba(0, 0, 0, 0.30);
  --darken-light: rgba(0, 0, 0, 0.15);
  --darken-medium: rgba(0, 0, 0, 0.20);
  --darken-heavy: rgba(0, 0, 0, 0.30);

  /* Scrollbar */
  --scrollbar-thumb: #445868;
  --scrollbar-thumb-hover: #5A6E80;

  /* Input */
  --input-bg: #283545;

  /* Panels */
  --panel-bg: #222E3E;
  --panel-border: #344050;

  /* Map */
  --map-bg: #16202E;
  --map-grid: #1E3040;
  --map-country: #2D4035;
  --map-stroke: #3D5045;

  /* Typography inherits from light variant selector */
  --font-body: 'Nunito', system-ui, -apple-system, sans-serif;

  /* Panel border radius */
  --panel-radius: 14px;

  /* Semantic — lighter variants for dark backgrounds */
  --semantic-critical: #D4B36A;
  --semantic-high: #8BAF7A;
  --semantic-elevated: #8BB5D4;
  --semantic-normal: #8BAF7A;
  --semantic-low: #D49BAF;
  --semantic-info: #8BB5D4;

  --threat-critical: #D4B36A;
  --threat-high: #9BBF8A;
  --threat-medium: #8BB5D4;
  --threat-low: #8BAF7A;
  --threat-info: #8BB5D4;

  --defcon-1: #D4B36A;
  --defcon-2: #B8C87B;
  --defcon-3: #8BB5D4;
  --defcon-4: #8BAF7A;
  --defcon-5: #9BBF8A;

  --status-live: #8BAF7A;
  --status-cached: #D4B36A;
  --status-unavailable: #D49BAF;

  --red: #D49BAF;
  --green: #8BAF7A;
  --yellow: #D4B36A;
}

/* ==========================================================
   Happy Panel Chrome — Rounded, Warm, Welcoming
   ========================================================== */

/* ---------- Panel border-radius & shadow (light) ---------- */
[data-variant="happy"] .panel {
  border-radius: var(--panel-radius, 14px);
  overflow: hidden;
  box-shadow: 0 1px 3px rgba(80, 70, 50, 0.06), 0 1px 2px rgba(80, 70, 50, 0.04);
}

[data-variant="happy"] .panel-header {
  border-radius: var(--panel-radius, 14px) var(--panel-radius, 14px) 0 0;
}

/* ---------- Panel shadow (dark mode) ---------- */
[data-variant="happy"][data-theme="dark"] .panel {
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.20), 0 1px 2px rgba(0, 0, 0, 0.12);
}

/* ---------- Panel title — softer casing ---------- */
[data-variant="happy"] .panel-title {
  text-transform: none;
  letter-spacing: 0.3px;
  font-weight: 700;
}

/* ---------- Panel count badge — rounded pill ---------- */
[data-variant="happy"] .panel-count {
  border-radius: 10px;
  padding: 2px 8px;
}

/* ---------- Panel resize handle — softer ---------- */
[data-variant="happy"] .panel-resize-handle {
  background: linear-gradient(to top, rgba(107, 143, 94, 0.10), transparent);
}

/* ---------- Map section — rounded ---------- */
[data-variant="happy"] .map-section {
  border-radius: var(--panel-radius, 14px);
  overflow: hidden;
}

/* ---------- Map controls — rounded ---------- */
[data-variant="happy"] .map-controls {
  gap: 6px;
}

[data-variant="happy"] .map-control-btn {
  border-radius: 8px;
}

/* ==========================================================
   Happy Empty States — Friendly nature-themed illustration
   ========================================================== */
[data-variant="happy"] .panel-empty,
[data-variant="happy"] .empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 32px 24px;
  text-align: center;
  color: var(--text-dim);
  gap: 12px;
  font-size: 13px;
}

[data-variant="happy"] .panel-empty::before,
[data-variant="happy"] .empty-state::before {
  content: '';
  display: block;
  width: 48px;
  height: 48px;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48' fill='none'%3E%3Cpath d='M24 40V24M24 24C20 20 14 18 8 20C14 14 20 14 24 18C28 14 34 14 40 20C34 18 28 20 24 24Z' stroke='%236B8F5E' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M18 38C18 38 20 34 24 34C28 34 30 38 30 38' stroke='%236B8F5E' stroke-width='1.5' stroke-linecap='round' opacity='0.4'/%3E%3C/svg%3E");
  background-size: contain;
  background-repeat: no-repeat;
  opacity: 0.6;
}

/* ==========================================================
   Happy Loading States — Gentle pulse instead of radar sweep
   ========================================================== */
[data-variant="happy"] .panel-loading-radar {
  border-color: rgba(107, 143, 94, 0.25);
}

[data-variant="happy"] .panel-radar-sweep {
  background: linear-gradient(90deg, transparent, var(--status-live));
  animation: happy-radar-sweep 3s linear infinite;
}

@keyframes happy-radar-sweep {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

[data-variant="happy"] .panel-radar-dot {
  background: var(--status-live);
  box-shadow: 0 0 12px var(--status-live);
  animation: happy-pulse 2s ease-in-out infinite;
}

[data-variant="happy"] .status-dot {
  animation: happy-pulse 2.5s ease-in-out infinite;
}

@keyframes happy-pulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.6; transform: scale(1.08); }
}

[data-variant="happy"] .panel-loading-text {
  letter-spacing: 0.2px;
}

/* ==========================================================
   Happy Panel Error State — Softer error display
   ========================================================== */
[data-variant="happy"] .panel-header-error {
  background: rgba(196, 163, 90, 0.12);
  border-bottom-color: rgba(196, 163, 90, 0.30);
}

/* ==========================================================
   Happy Download Banner — Rounded and warm
   ========================================================== */
[data-variant="happy"] .wm-dl-panel {
  border-radius: 0 0 0 14px;
  border-left-color: var(--green);
}

/* ==========================================================
   Happy Data Badges — Rounded pills
   ========================================================== */
[data-variant="happy"] .panel-data-badge {
  border-radius: 10px;
}

/* ==========================================================
   Happy Tab Styles — Rounded tabs
   ========================================================== */
[data-variant="happy"] .disp-tab,
[data-variant="happy"] .ucdp-tab {
  border-radius: 8px;
}

[data-variant="happy"] .disp-tab-active,
[data-variant="happy"] .ucdp-tab-active {
  background: color-mix(in srgb, var(--semantic-high) 12%, transparent);
  border-color: var(--semantic-high);
  color: var(--semantic-high);
}

/* ==========================================================
   Happy Severity Badges — Warm tones
   ========================================================== */
[data-variant="happy"] .severity-extreme {
  background: color-mix(in srgb, var(--semantic-critical) 15%, transparent);
  color: var(--semantic-critical);
}

[data-variant="happy"] .severity-moderate {
  background: color-mix(in srgb, var(--semantic-high) 12%, transparent);
  color: var(--semantic-high);
}

/* ==========================================================
   Happy Posture Radar — Softer animation
   ========================================================== */
[data-variant="happy"] .posture-radar-sweep {
  animation: happy-radar-sweep 3s linear infinite;
}
